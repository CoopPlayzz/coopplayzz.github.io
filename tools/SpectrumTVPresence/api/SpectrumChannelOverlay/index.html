<html><head><script>
  async function spectrumChannelOverlay(imgChannel){
  var canvas = document.getElementById("cane");canvas.id="canvasee";canvas.width=512;canvas.height=512;
  var ctx = canvas.getContext("2d");
  var img = new Image(512,512)
  var img2 = new Image(30,30)
  img2.crossOrigin = "anonymous";
  img.crossOrigin = "anonymous";
  img.height=512
  img.src=imgChannel
  img2.height=30
  img2.src="https://cdn.discordapp.com/app-assets/951615885922148412/951645722267250838.png"
  ctx.drawImage(img, 0, 0);
  roundedImage(20,20,100,100,14,ctx)
  ctx.clip()
  ctx.drawImage(img2, 20,20,100,100)
  ctx.restore()
  var data =await canvas.toDataURL("image/png");document.getElementById("imgforend").src=data;
  return data
}
function roundedImage(x,y,width,height,radius,ctx){
  ctx.beginPath();
  ctx.moveTo(x + radius, y);
  ctx.lineTo(x + width - radius, y);
  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
  ctx.lineTo(x + width, y + height - radius);
  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
  ctx.lineTo(x + radius, y + height);
  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
  ctx.lineTo(x, y + radius);
  ctx.quadraticCurveTo(x, y, x + radius, y);
  ctx.closePath();
}
  
const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);
async function e(){if(urlParams.has("channelImgUrl")){var dataUrl = await spectrumChannelOverlay(urlParams.get("channelImgUrl"));}}
e()//console.log(queryString);  </script></head><body><h4>Canvas</h4><br /><canvas id="cane"></canvas><br /><h4>img</h4><br /><img id="imgforend">dont support img</img><br /><h4>raw text</h4><br /><span id="textforend"></span></body></html>
